(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{162:function(t,a,e){t.exports=e.p+"assets/img/03-clone-url.77efaf82.png"},163:function(t,a,e){t.exports=e.p+"assets/img/02-create-repo.d0fb0657.png"},164:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPgAAAA4CAMAAADn58WNAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABRUExURSinRTHIVDLMViuzSimtSC+/UDHFU////ymqRjDDUSqwSS24TCWMPi68Ti+tTTLKVTPOV13HdajitfX89ymaRNXy3EPAYOn47JDaocHqynvTjwWyGWUAAARGSURBVGje7ZvpcqMwDIDZsoSmQFrb+Hz/B11Z8oUh6THpZmddtTM4tnV8kgDnRzohNLs0JkwL0Ql7aVAsgMPl9PTWkDydAFl00Oevb43J6+XiustleGpOhssFwF/bA/+F4E8NClW8PfEVf35uEPy1e+667leD0nU/4A2CnxqUH/Amwc8NSrPga9etzVZ8PZ+Hg78geVhMno9VrpioZL82HNjeygjC7kYN9n3F1+FQpHdmcOhgpIdHCoL7SIwx7h4GodHX7ga4UP8WOIcrv4fBdb1dcfLyeHAOov4qOJb88eApAXcFXw6FwEcOQwSnWcalGLV1fnzy6yfaKga4at+Q2QL2p+J6tLVmXhOaq2Vj2gz4aXBWC6EldypuX+wYRewVsjcDI3S5KCzdEd074IL0MjiPnq0KWwB0EHRFN8MW3PlkyJ0mrQmc0JirIW3Az6HhxpDKA/BKofDm4xjRS07BJ8G5wJIncPKF8UYYA5lHn7StdINBhb2V5jIWoocyMZRrgwNxA7xSKL1ZiitV5vPghmPuIjijN9zCNJEyIsUgbcrDBhwWOLc7TVqzjCFLTJ5kLNqyYR9zNoMrZbFlQHYKtTcZOl0vXwJXWPIIzsM9jxMy9DYGqf16nd/UqHvNJZVe5o4Q59CdkGsbu7V4JJR2dgqltxiJSbuPwadDQfAJS47gYUpaELwBF5pgk4ZJ2DVgGgoL+GzMxjaaeHf4FW97pA24V9EKcklu2JJMMbjyZLJWKL1NhsYyaB3Iu+C+5DaCi/LOHBXF4cAzB08OG3+qwB0Nd5qRZGI0IdBb3OrQL92/fDkErxVKb9PZP5WxIeX0RXBK3jVwnxHuCNrDh1AKcPZF8EnZqMM/Dp7KixVxdUCfAl8EPYx1nsqCTw9Ogft23zZWEYo8SsqtVgeBB5uR4fb5YKsn99h9lnL8RXAseQDnRe8oFjdpv2bppT9dAd9pjnFC0oDHB4QZN+HqbYNk8J3CBnwKxwA73QLvDwXB4YrnMcCDIaMDCMwxLvxaTy9T2/cmDgrBUGi409y+zsKG9HYCw9apqKeyKYPnFXib7RRKbyCOwF1/RQL4dPAXwQOTzpx0rjDZfgzcD7KBTSi1ZjrOYDOlDeE8Qh+FpgNPQcXifb9TSFsm+sdyiemYbeo/UPFgA8FDEsYErsbgbxm3Ge/rGlSa6YDpK1ikJn7OWLqk6mUCrxSqitMq79+p+E1wKiuB98p/MRDwzUDlXT6veXAFvNIsv6SEDfFbDBpRjkuNX0GWjamFYxvwnUINrvaF+CD498rtsO4g/i0nr66+ePD55QGC4N9oH28tc30dwOf/ENxoOnpcz8s8d/P6/4HTc++WfQ8+/36AYGDfZh3Atb1lnsBffrcnAL7ODXI/rtX/gYrP83OD8gP+A94SeNegtAy+zmt73B6atVjyeWadWOfWau6J/Y9x5gbF/xhHaNYatv/51R8CEqoshfpUmAAAAABJRU5ErkJggg=="},166:function(t,a,e){"use strict";e.r(a);var s=[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"three-two-one-run"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#three-two-one-run","aria-hidden":"true"}},[this._v("#")]),this._v(" Three, two, one...RUN!")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),e("p",[t._v("This post is no longer being updated as I found too many limitations around git\nrepos and storing larger packages inside them, quite often hitting the size\nlimitations for some packages. It currently makes use of "),e("code",[t._v("repose")]),t._v(" but\n"),e("code",[t._v("aurutils")]),t._v(" is set to drop support for it at some point as there are a number of\nissues with it and so will eventually stop working. It should be possible to\nuse "),e("code",[t._v("repo-add")]),t._v(" but this creates symlinks which need to be dealt with as they do\nnot work when accessed via the raw links.")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependencies","aria-hidden":"true"}},[this._v("#")]),this._v(" Dependencies")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("We only require a few packages to get us going of which only "),a("code",[this._v("aurutils")]),this._v(" needs to\nbe installed from AUR. It will be the only package we are required to\nbuild and install manually.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("li",[a("strong",[this._v("git")]),this._v(": to manage the git repo.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("li",[a("strong",[this._v("base-devel")]),this._v(": needed to build aurutils and other packages.")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" pacman -S --needed repose base-devel "),e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v("\n"),e("span",{attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://aur.archlinux.org/cgit/aur.git/snapshot/aurutils.tar.gz\n"),e("span",{attrs:{class:"token function"}},[t._v("tar")]),t._v(" -xf aurutils.tar.gz\n"),e("span",{attrs:{class:"token function"}},[t._v("cd")]),t._v(" aurutils\nmakepkg -sci\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("If you get the following error while running "),a("code",[this._v("makepkg")]),this._v(".")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token operator"}},[t._v("==")]),e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Verifying "),e("span",{attrs:{class:"token function"}},[t._v("source")]),t._v(" "),e("span",{attrs:{class:"token function"}},[t._v("file")]),t._v(" signatures with gpg"),e("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n    aurutils-1.5.3.tar.gz "),e("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". FAILED "),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("unknown public key 6BC26A17B9B7018A"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{attrs:{class:"token operator"}},[t._v("==")]),e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" ERROR: One or "),e("span",{attrs:{class:"token function"}},[t._v("more")]),t._v(" PGP signatures could not be verified"),e("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Simply download the missing key with the following before running "),a("code",[this._v("makepkg")]),this._v("\nabove.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[this._v("gpg --recv-key 6BC26A17B9B7018A\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("em",[this._v("^ We are using "),a("code",[this._v("repose")]),this._v(" instead of "),a("code",[this._v("repo-add")]),this._v(" as "),a("code",[this._v("repo-add")]),this._v(" creates symlinks to\nthe database which do not always work inside raw links to repos.")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"creating-the-git-repo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-the-git-repo","aria-hidden":"true"}},[this._v("#")]),this._v(" Creating the Git Repo")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:e(164),alt:"New Repo"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:e(163),alt:"Create Repo"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:e(162),alt:"Clone URL"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("And clone it locally and create a directory to house your Arch Linux repo such\nas "),a("code",[this._v("x86_64")]),this._v(" - It is convention to separate Arch Linux repos via the\narchitecture of the packages they contain.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[this._v("git")]),this._v(" clone git@github.com:mdaffin/arch-repo.git\n"),a("span",{attrs:{class:"token function"}},[this._v("cd")]),this._v(" arch-repo\n"),a("span",{attrs:{class:"token function"}},[this._v("mkdir")]),this._v(" -p x86_64\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"aurutils-building-and-managing-packages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aurutils-building-and-managing-packages","aria-hidden":"true"}},[this._v("#")]),this._v(" Aurutils - Building and Managing Packages")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Aurutils contains a suite of utilities that can be used to manage a repo of AUR\npackages. The two main utilities we will use are "),a("code",[this._v("aursearch")]),this._v(", which can search\nAUR for packages that match a given pattern.")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("% aursearch aurutils\naur/aurutils 1.5.3-5 "),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("55"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    helper tools "),e("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the arch user repository\naur/aurutils-git 1.5.3.r234.g15ef2ab-1 "),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("5"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    helper tools "),e("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the arch user repository\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("And "),a("code",[this._v("aursync")]),this._v(" which will download and build packages and ensure packages in the\nrepo are up to date.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("For "),a("code",[this._v("aursync")]),this._v(" to work, we need to add a repo to "),a("code",[this._v("/etc/pacman.conf")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{attrs:{class:"token selector"}},[t._v("[mdaffin]")]),t._v("\n"),e("span",{attrs:{class:"token constant"}},[t._v("SigLevel")]),t._v(" "),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" Optional TrustAll")]),t._v("\n"),e("span",{attrs:{class:"token constant"}},[t._v("Server")]),t._v(" "),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" https://raw.githubusercontent.com/mdaffin/arch-repo/master/x86_64")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Give your repo a unique name by replacing "),a("code",[this._v("[mdaffin]")]),this._v(" with something else.\nChange the URL to that of your repos raw link. You can get the raw link for\nmost hosted git providers by creating a file in the repo and viewing the raw\nfile, then just remove the filename form that url.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[this._v("aursync --repo mdaffin --root x86_64 aurutils\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Replace mdaffin with the name of your repo, this must match the section in\n"),a("code",[this._v("/etc/pacman.conf")]),this._v(". Since we have a remote repo we need to tell "),a("code",[this._v("aursync")]),this._v(" were\nto place the files using "),a("code",[this._v("--root <dir>")]),this._v(" pointing it to the directory we created\ninside the git repo.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[this._v("% "),a("span",{attrs:{class:"token function"}},[this._v("ls")]),this._v(" x86_64\naurutils-1.5.3-5-any.pkg.tar.xz  mdaffin.db  mdaffin.files\n")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" add x86_84\n"),e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),e("span",{attrs:{class:"token string"}},[t._v('"added aurutils"')]),t._v("\n"),e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" push\n")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("% "),e("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" pacman -Syy\n% pacman -Ss aurutils                                                              :"),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\nmdaffin/aurutils 1.5.3-5 "),e("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("installed"),e("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    helper tools "),e("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the arch user repository\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("And that's it, you have created a repo inside a hosted git repository. You can\nadd more packages to this repo using the "),a("code",[this._v("aursync")]),this._v(" command above.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("To check for and update all the packages in the repo simply add "),a("code",[this._v("-u")]),this._v(" to the\n"),a("code",[this._v("aursync")]),this._v(" command.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[this._v("aursync --repo mdaffin --root x86_64 -u\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"wrapper-script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wrapper-script","aria-hidden":"true"}},[this._v("#")]),this._v(" Wrapper Script")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",[t._v("We can automate most of this with a simple wrapper script around "),e("code",[t._v("aursync")]),t._v(".\nSimply save this script somewhere, replace the "),e("code",[t._v("CLONE_URL")]),t._v(", "),e("code",[t._v("GIT_BRANCH")]),t._v(",\n"),e("code",[t._v("REPO_PATH")]),t._v(" and "),e("code",[t._v("REPO_NAME")]),t._v(" variables with your own and call it like you would\n"),e("code",[t._v("aursync")]),t._v(": "),e("code",[t._v("./aursync_wrapper PACKAGE")]),t._v(" or "),e("code",[t._v("./aursync_wrapper -u")]),t._v(".")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("This script will automatically clone and sync the git repo to\n"),a("code",[this._v("~/.local/share/arch-repo/repo")]),this._v(".")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v(" -x\n"),e("span",{attrs:{class:"token comment"}},[t._v("# Wraps aursync command that stores built packages inside a git repo")]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" -uo pipefail\n"),e("span",{attrs:{class:"token function"}},[t._v("trap")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v("'s="),e("span",{attrs:{class:"token variable"}},[t._v("$?")]),t._v('; echo "'),e("span",{attrs:{class:"token variable"}},[t._v("$0")]),t._v(': Error on line "'),e("span",{attrs:{class:"token variable"}},[t._v("$LINENO")]),t._v('": '),e("span",{attrs:{class:"token variable"}},[t._v("$BASH_COMMAND")]),t._v('"; exit '),e("span",{attrs:{class:"token variable"}},[t._v("$s")]),t._v("'")]),t._v(" ERR\n"),e("span",{attrs:{class:"token function"}},[t._v("shopt")]),t._v(" -s expand_aliases\n\nCLONE_URL"),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("git@github.com:mdaffin/arch-repo.git\nGIT_BRANCH"),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("master\nREPO_PATH"),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("x86_64\nREPO_NAME"),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("mdaffin\n\nDATA_DIR"),e("span",{attrs:{class:"token operator"}},[t._v("=")]),e("span",{attrs:{class:"token string"}},[t._v('"'),e("span",{attrs:{class:"token variable"}},[t._v("${XDG_DATA_HOME:-$HOME/.local/share/arch-repo}")]),t._v('"')]),t._v("\n"),e("span",{attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p "),e("span",{attrs:{class:"token string"}},[t._v('"'),e("span",{attrs:{class:"token variable"}},[t._v("${DATA_DIR}")]),t._v('"')]),t._v("\n"),e("span",{attrs:{class:"token function"}},[t._v("alias")]),t._v(" gitc"),e("span",{attrs:{class:"token operator"}},[t._v("=")]),e("span",{attrs:{class:"token string"}},[t._v("'git -C \""),e("span",{attrs:{class:"token variable"}},[t._v("${DATA_DIR}")]),t._v("/repo\"'")]),t._v("\n\n"),e("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" -d "),e("span",{attrs:{class:"token string"}},[t._v('"'),e("span",{attrs:{class:"token variable"}},[t._v("${DATA_DIR}")]),t._v('/repo"')]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),e("span",{attrs:{class:"token comment"}},[t._v("# DATA_DIR exists, reset and pull any changes")]),t._v("\n    gitc reset --hard\n    gitc clean -xffd\n    gitc checkout "),e("span",{attrs:{class:"token string"}},[t._v('"'),e("span",{attrs:{class:"token variable"}},[t._v("${GIT_BRANCH}")]),t._v('"')]),t._v("\n    gitc pull\n"),e("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n    "),e("span",{attrs:{class:"token comment"}},[t._v("# DATA_DIR does not exist, so clone it")]),t._v("\n    "),e("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" clone -b "),e("span",{attrs:{class:"token string"}},[t._v('"'),e("span",{attrs:{class:"token variable"}},[t._v("${GIT_BRANCH}")]),t._v('"')]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"'),e("span",{attrs:{class:"token variable"}},[t._v("${CLONE_URL}")]),t._v('"')]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"'),e("span",{attrs:{class:"token variable"}},[t._v("${DATA_DIR}")]),t._v('/repo"')]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n\n"),e("span",{attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p "),e("span",{attrs:{class:"token string"}},[t._v('"'),e("span",{attrs:{class:"token variable"}},[t._v("${DATA_DIR}")]),t._v("/repo/"),e("span",{attrs:{class:"token variable"}},[t._v("${REPO_PATH}")]),t._v('"')]),t._v("\n\naursync --repo "),e("span",{attrs:{class:"token string"}},[t._v('"'),e("span",{attrs:{class:"token variable"}},[t._v("${REPO_NAME}")]),t._v('"')]),t._v(" --root "),e("span",{attrs:{class:"token string"}},[t._v('"'),e("span",{attrs:{class:"token variable"}},[t._v("${DATA_DIR}")]),t._v("/repo/"),e("span",{attrs:{class:"token variable"}},[t._v("${REPO_PATH}")]),t._v('"')]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"'),e("span",{attrs:{class:"token variable"}},[t._v("$@")]),t._v('"')]),t._v("\n\n"),e("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v(" gitc status "),e("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"nothing to commit, working tree clean"')]),t._v(" "),e("span",{attrs:{class:"token operator"}},[t._v("&")]),e("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("/dev/null"),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    gitc add "),e("span",{attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n    gitc commit -m "),e("span",{attrs:{class:"token string"}},[t._v('"aursync '),e("span",{attrs:{class:"token variable"}},[t._v("$@")]),t._v('"')]),t._v("\n    gitc push\n"),e("span",{attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"conclusion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conclusion","aria-hidden":"true"}},[this._v("#")]),this._v(" Conclusion")])}],n=e(0),r=Object(n.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[t._m(0),t._m(1),e("p",[t._v("In this three-part series, I will show you one way to simplify and manage\nmultiple Arch Linux systems using a custom repo, a set of meta-packages and a\nscripted installer. Each part is standalone and can be used by its self, but\nthey are designed to build upon and complement each other each focusing on a\ndifferent part of the problem.")]),e("ul",[e("li",[e("strong",[t._v("Part 1:")]),t._v(" Hosting an Arch Linux Repo in an "),e("router-link",{attrs:{to:"/blog/archlinux-repo-in-aws-bucket/"}},[t._v("Amazon S3 Bucket")]),t._v(" or "),e("em",[t._v("Hosted Git Repository")])],1),e("li",[e("strong",[t._v("Part 2:")]),e("router-link",{attrs:{to:"/blog/archlinux-meta-packages/"}},[t._v("Managing Arch Linux with Meta Packages")])],1),e("li",[e("strong",[t._v("Part 3:")]),e("router-link",{attrs:{to:"/blog/archlinux-installer/"}},[t._v("Creating a Custom Arch Linux Installer")])],1)]),e("p",[t._v("When you use Arch Linux for any length of time you start collecting sets of\n"),e("a",{attrs:{href:"https://aur.archlinux.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("AUR"),e("OutboundLink")],1),t._v(" packages that you frequently use. Now, Arch Linux has loads of "),e("a",{attrs:{href:"https://wiki.archlinux.org/index.php/AUR_helpers",target:"_blank",rel:"noopener noreferrer"}},[t._v("AUR\nhelpers"),e("OutboundLink")],1),t._v(" that make managing AUR packages painless, but when you start using\narch on multiple systems it becomes annoying and time consuming to rebuild AUR\npackages on each system. In this post, I will show you how to use an hosted git\nrepository to create a cheap, low maintenance Arch Linux repository. As well as\nmaking use of the "),e("code",[t._v("aurutils")]),t._v(" package to make building and upgrading AUR\npackages a painless exercise.")]),e("p",[t._v("You can use any git provider you wish, for example "),e("a",{attrs:{href:"https://gitlab.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gitlab"),e("OutboundLink")],1),t._v(" or "),e("a",{attrs:{href:"https://github.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Github"),e("OutboundLink")],1),t._v(" the\nonly requirement is they have a public URL you can fetch the raw files from.\nFor this guide I will use Github.")]),t._m(2),t._m(3),e("ul",[e("li",[e("strong",[e("a",{attrs:{href:"https://github.com/AladW/aurutils",target:"_blank",rel:"noopener noreferrer"}},[t._v("aurutils"),e("OutboundLink")],1)]),t._v(": a set of utilities that make it easy to manage/update a repo with\nAUR packages.")]),t._m(4),e("li",[e("strong",[e("a",{attrs:{href:"https://github.com/vodik/repose",target:"_blank",rel:"noopener noreferrer"}},[t._v("repose"),e("OutboundLink")],1)]),t._v(": an alternative to add-repo, but makes deploying the repo easier\ninside a git repo. Aurutils automatically uses repose if it is installed, so we\nwill not explicitly use. ^")]),t._m(5)]),e("p",[t._v("To install all of these run the following.")]),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),e("p",[t._v("Head over to "),e("a",{attrs:{href:"https://gitlab.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gitlab"),e("OutboundLink")],1),t._v(" and create a new repository.")]),t._m(13),e("p",[t._v("Give it an name and ensure that it is public. It needs to be public to allow\npacman to download packages from it without any kind of authentication.")]),t._m(14),e("p",[t._v("And finally grab the clone URL for your new repository.")]),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),e("p",[t._v("Now we can create the repo and upload our first package to it. For this, we are\ngoing to rebuild the aurutils package as it will be handy to have that stored\nin our repo.")]),t._m(25),t._m(26),e("p",[t._v("If all goes well you should end up with the package and arch repo database\ninside the git repo.")]),t._m(27),e("p",[t._v("Finally we need to commit and push these changes.")]),t._m(28),e("p",[t._v("Now they packages should be available to download with pacman.")]),t._m(29),t._m(30),t._m(31),t._m(32),e("p",[t._v("And remember to commit and push when you are done.")]),t._m(33),t._m(34),t._m(35),t._m(36),t._m(37),e("p",[t._v("There are some limitations with this approach, most git hosted git repos have a\nsoft or hard limit on the repo size - typically around 1GB which you can\nquickly exceed with a collection of packages. You also need to make sure that\nwhen you prune packages you also squash your repo's history or you won't\nactually be saving any space.")]),e("p",[t._v("This approach is more stable on weak connections than relying on a network\nmounted fuse file system as you are working locally and only syncing up changes\nwhen you start or have finished. The files remain cached on your local system\nbut you do need to download all the files as a one-off when you first clone the\nrepo which can take a bit more time than using a networked file system.")]),e("p",[t._v("Luckily it is very easy to switch between the two methods as it just requires\nyou to download the repo and upload it somewhere else.")]),e("p",[e("em",[e("a",{attrs:{href:"https://www.reddit.com/r/archlinux/comments/7zodod/hosting_an_arch_linux_repo_in_a_hosted_git/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Discuss on Reddit"),e("OutboundLink")],1)])])])},s,!1,null,null,null);a.default=r.exports}}]);